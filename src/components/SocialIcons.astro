---
import config from "virtual:starlight/user-config";
import { Icon } from "@astrojs/starlight/components";
import KeybaseIcon from "../../public/keybase.svg";
import ORCiDIcon from "../../public/orcid.svg";
import {basic} from "../../info.json";

const links = config.social || [];
---

{
    links.length > 0 && (
        <>
            <button
                type="button"
                class="sl-flex email-copy-btn"
                title="Copy email address"
                onclick={`navigator.clipboard.writeText('${basic.email}')`}
            >
                <span class="sr-only">Email</span>
                <Icon name="email" />
            </button>
            { basic.keybase && (
                <a href={basic.keybase} target="_blank" rel="me" class="sl-flex">
                    <span class="sr-only">Keybase</span>
                    <KeybaseIcon width=16 height=16 />
                </a>
            )}
            { basic.orcid && (
                <a href={basic.orcid} target="_blank" rel="me" class="sl-flex">
                    <span class="sr-only">ORCiD</span>
                    <ORCiDIcon width=16 height=16 />
                </a>
            )}
            { links.map(({ label, href, icon }) => (
                <a {href} rel="me" class="sl-flex">
                    <span class="sr-only">{label}</span>
                    <Icon name={icon} />
                </a>
            ))}
        </>
    )
}

<style>
    @layer starlight.core {
        a,
        button.email-copy-btn {
            color: var(--sl-color-text-accent);
            padding: 0.5em;
            margin: -0.5em;
        }
        a:hover,
        button.email-copy-btn:hover {
            opacity: 0.66;
        }
        button.email-copy-btn {
            background: none;
            border: none;
            cursor: pointer;
            transition: color 0.2s ease;
        }
    }
</style>
