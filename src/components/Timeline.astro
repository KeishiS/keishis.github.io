---
import { Icon } from "@astrojs/starlight/components";
import DateBadge from "./DateBadge.astro";
import TimelineCard from "./TimelineCard.astro";

interface TimelineItem {
    title: string;
    subtitle: string;
    years: string;
    details?: string;
}

interface Props {
    items: TimelineItem[];
    iconType: "education" | "experience";
}

const { items, iconType } = Astro.props;

const getIconName = (type: string) => {
    if (type === "education") {
        return "pencil";
    } else if (type === "experience") {
        return "document";
    }
    return "document";
};
---

<div class="relative border-l-2 ml-2 sm:ml-3 border-card">
    {
        items.map((item) => {
            return (
                <div class="mb-6 sm:mb-10 ml-6 sm:ml-8 relative">
                    {/* Timeline dot */}
                    <div class="absolute -left-[37px] sm:-left-[45px] top-1 w-5 h-5 sm:w-6 sm:h-6 rounded-full flex items-center justify-center bg-accent">
                        <Icon
                            name={getIconName(iconType)}
                            class="w-3 h-3 sm:w-4 sm:h-4"
                            color="var(--sl-color-white)"
                        />
                    </div>

                    {/* Date */}
                    <div class="mb-2">
                        <DateBadge date={item.years} />
                    </div>

                    {/* Content */}
                    <TimelineCard
                        title={item.title}
                        subtitle={item.subtitle}
                        details={item.details}
                    />
                </div>
            );
        })
    }
</div>
