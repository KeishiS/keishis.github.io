@import "tailwindcss";
@plugin "@tailwindcss/typography";
@import "./asciidoc.css";

@variant dark (&:where(.dark, .dark *));

/* セマンティックカラー定義 (Tailwind v4 @theme) */
@theme {
    --color-bg: #f5f7fb;
    --color-surface: #ffffff;
    --color-surface-soft: #eef2ff;
    --color-surface-strong: #dfe4ff;
    --color-border: #e4e8f0;
    --color-border-strong: #c7d0e2;
    --color-fg: #0f172a;
    --color-fg-subtle: #3c4a65;
    --color-fg-muted: #6b7385;
    --color-muted: #94a3b8;
    --color-accent: #22c55e;
    --color-accent-strong: #16a34a;
    --color-accent-soft: #e9f7ef;
    --color-danger: #ef4444;
    --color-warning: #f59e0b;
    --color-info: #0ea5e9;
}

/* セマンティックカラー変数の定義 */
:root {
    /* Highlight (Mark) Colors (Light) */
    --color-highlight-bg: color-mix(
        in srgb,
        var(--color-warning) 20%,
        var(--color-surface)
    );
    --color-highlight-border: color-mix(
        in srgb,
        var(--color-warning) 40%,
        var(--color-border)
    );
    --color-highlight-text: var(--color-fg);

    /* Admonition Colors (Light) */
    --color-note-border: var(--color-info);
    --color-note-bg: color-mix(
        in srgb,
        var(--color-info) 12%,
        var(--color-surface)
    );
    --color-note-icon: color-mix(in srgb, var(--color-info) 75%, #000000);

    --color-tip-border: var(--color-accent);
    --color-tip-bg: color-mix(
        in srgb,
        var(--color-accent) 12%,
        var(--color-surface)
    );
    --color-tip-icon: color-mix(in srgb, var(--color-accent) 75%, #000000);

    --color-important-border: var(--color-accent-strong);
    --color-important-bg: color-mix(
        in srgb,
        var(--color-accent-strong) 10%,
        var(--color-surface)
    );
    --color-important-icon: color-mix(
        in srgb,
        var(--color-accent-strong) 75%,
        #000000
    );

    --color-warning-border: var(--color-warning);
    --color-warning-bg: color-mix(
        in srgb,
        var(--color-warning) 12%,
        var(--color-surface)
    );
    --color-warning-icon: color-mix(in srgb, var(--color-warning) 75%, #000000);

    --color-caution-border: var(--color-danger);
    --color-caution-bg: color-mix(
        in srgb,
        var(--color-danger) 12%,
        var(--color-surface)
    );
    --color-caution-icon: color-mix(in srgb, var(--color-danger) 75%, #000000);

    /* Math / Theorem Colors (Light) */
    --color-definition-border: var(--color-info);
    --color-definition-bg: color-mix(in srgb, var(--color-info) 12%, #ffffff);
    --color-definition-title: color-mix(
        in srgb,
        var(--color-info) 75%,
        #000000
    );

    --color-theorem-border: var(--color-accent);
    --color-theorem-bg: color-mix(in srgb, var(--color-accent) 12%, #ffffff);
    --color-theorem-title: color-mix(in srgb, var(--color-accent) 75%, #000000);

    --color-lemma-border: var(--color-info);
    --color-lemma-bg: color-mix(in srgb, var(--color-info) 12%, #ffffff);
    --color-lemma-title: color-mix(in srgb, var(--color-info) 75%, #000000);

    --color-proof-border: var(--color-border-strong);
    --color-proof-title: var(--color-fg-muted);
    --color-proof-text: var(--color-fg-subtle);

    /* Quote & Verse (Light) */
    --color-quote-border: var(--color-border);
    --color-quote-bg: var(--color-surface-soft);
    --color-quote-text: inherit;
    --color-quote-attribution: var(--color-fg-muted);
    --color-quote-icon: var(--color-muted);

    --color-verse-border: var(--color-border);
    --color-verse-bg: var(--color-surface-soft);
    --color-verse-text: var(--color-fg-subtle);

    /* Code Block (Light/Dark Common but define here for consistency) */
    --color-code-bg: var(--color-surface-strong);
    --color-code-border: var(--color-border-strong);
    --color-code-title-bg: color-mix(
        in srgb,
        var(--color-surface-strong) 80%,
        #000000 20%
    );
    --color-code-title-text: var(--color-fg-muted);

    /* Definition List (Light) */
    --color-dl-dt: var(--color-fg);
    --color-dl-border: var(--color-border);
    --color-dl-dd-border: var(--color-border-strong);
    --color-dl-dd-text: var(--color-fg-subtle);
}

.dark {
    --color-bg: #0b1220;
    --color-surface: #0f172a;
    --color-surface-soft: #111827;
    --color-surface-strong: #1b2540;
    --color-border: #1f2a3d;
    --color-border-strong: #2c3c5d;
    --color-fg: #e5edff;
    --color-fg-subtle: #cdd7f3;
    --color-fg-muted: #9bacd1;
    --color-muted: #7c8fb2;
    --color-accent: #34d399;
    --color-accent-strong: #22c55e;
    --color-accent-soft: #0f2416;
    --color-danger: #f87171;
    --color-warning: #fbbf24;
    --color-info: #38bdf8;

    /* Highlight (Mark) Colors (Dark) */
    --color-highlight-bg: color-mix(
        in srgb,
        var(--color-warning) 25%,
        var(--color-surface)
    );
    --color-highlight-border: color-mix(
        in srgb,
        var(--color-warning) 50%,
        var(--color-border)
    );
    --color-highlight-text: var(--color-fg);

    /* Admonition Colors (Dark) */
    --color-note-border: var(--color-info);
    --color-note-bg: color-mix(
        in srgb,
        var(--color-info) 18%,
        var(--color-surface)
    );
    --color-note-icon: color-mix(in srgb, var(--color-info) 80%, #ffffff);

    --color-tip-border: var(--color-accent);
    --color-tip-bg: color-mix(
        in srgb,
        var(--color-accent) 18%,
        var(--color-surface)
    );
    --color-tip-icon: color-mix(in srgb, var(--color-accent) 80%, #ffffff);

    --color-important-border: var(--color-accent-strong);
    --color-important-bg: color-mix(
        in srgb,
        var(--color-accent-strong) 16%,
        var(--color-surface)
    );
    --color-important-icon: color-mix(
        in srgb,
        var(--color-accent-strong) 80%,
        #ffffff
    );

    --color-warning-border: var(--color-warning);
    --color-warning-bg: color-mix(
        in srgb,
        var(--color-warning) 18%,
        var(--color-surface)
    );
    --color-warning-icon: color-mix(in srgb, var(--color-warning) 80%, #ffffff);

    --color-caution-border: var(--color-danger);
    --color-caution-bg: color-mix(
        in srgb,
        var(--color-danger) 18%,
        var(--color-surface)
    );
    --color-caution-icon: color-mix(in srgb, var(--color-danger) 80%, #ffffff);

    /* Math / Theorem Colors (Dark) */
    --color-definition-border: var(--color-info);
    --color-definition-bg: color-mix(
        in srgb,
        var(--color-info) 18%,
        var(--color-surface)
    );
    --color-definition-title: color-mix(
        in srgb,
        var(--color-info) 80%,
        #ffffff
    );

    --color-theorem-border: var(--color-accent);
    --color-theorem-bg: color-mix(
        in srgb,
        var(--color-accent) 18%,
        var(--color-surface)
    );
    --color-theorem-title: color-mix(in srgb, var(--color-accent) 80%, #ffffff);

    --color-lemma-border: var(--color-info);
    --color-lemma-bg: color-mix(
        in srgb,
        var(--color-info) 18%,
        var(--color-surface)
    );
    --color-lemma-title: color-mix(in srgb, var(--color-info) 80%, #ffffff);

    --color-proof-border: var(--color-border-strong);
    --color-proof-title: var(--color-fg-muted);
    --color-proof-text: var(--color-fg-subtle);

    /* Quote & Verse (Dark) */
    --color-quote-border: var(--color-border);
    --color-quote-bg: color-mix(in srgb, var(--color-surface) 86%, #ffffff 14%);
    --color-quote-text: var(--color-fg);
    --color-quote-attribution: var(--color-fg-muted);
    --color-quote-icon: var(--color-muted);

    --color-verse-border: var(--color-border);
    --color-verse-bg: color-mix(in srgb, var(--color-surface) 86%, #ffffff 14%);
    --color-verse-text: var(--color-fg-subtle);

    /* Definition List (Dark) */
    --color-dl-dt: var(--color-fg);
    --color-dl-border: var(--color-border);
    --color-dl-dd-border: var(--color-border-strong);
    --color-dl-dd-text: var(--color-fg-subtle);
}

@theme {
    --font-sans:
        "Inter", "Noto Sans JP", "Helvetica Neue", "Arial",
        "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Meiryo", sans-serif;
    --font-display:
        "Space Grotesk", "Inter", "Noto Sans JP", "Helvetica Neue", "Arial",
        "Hiragino Kaku Gothic ProN", "Hiragino Sans", "Meiryo", sans-serif;
    --font-serif:
        "Merriweather", "Noto Serif JP", "Times New Roman",
        "Hiragino Mincho ProN", serif;
}

body {
    @apply bg-bg text-fg font-sans antialiased;
}

/* Landing sections */
.section-shell {
    padding: 4rem 1.5rem;
    max-width: 1100px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}
.section-shell.alt {
    border-radius: 24px;
    padding: 4rem 2rem;
}
.section-shell.with-gap {
    margin-bottom: 3rem;
}
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 1rem;
    flex-wrap: wrap;
}
.section-title {
    font-family: var(--font-display);
    font-size: clamp(1.75rem, 2.5vw, 2.25rem);
    letter-spacing: -0.02em;
    font-weight: 700;
}
.eyebrow {
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--color-muted);
    font-size: 0.75rem;
    font-weight: 700;
}

/* Mobile tweaks */
@media (max-width: 768px) {
    .section-shell {
        padding: 3rem 1.25rem;
    }
    .section-shell.alt {
        padding: 3rem 1.25rem;
    }
}

/* UI Primitives -------------------------------------------------- */
.card {
    background-color: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 16px;
    box-shadow: 0 12px 35px rgba(15, 23, 42, 0.05);
    transition:
        transform 150ms ease,
        box-shadow 150ms ease;
}

.card:hover {
    box-shadow: 0 16px 45px rgba(15, 23, 42, 0.08);
}

.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    font-weight: 600;
    border-radius: 9999px;
    padding: 0.65rem 1.1rem;
    line-height: 1.1;
    transition:
        background-color 150ms ease,
        color 150ms ease,
        box-shadow 150ms ease,
        transform 150ms ease;
    text-decoration: none;
    border: 1px solid transparent;
}

.btn-primary {
    background-color: var(--color-accent);
    color: #fff;
    border-color: color-mix(in srgb, var(--color-accent) 92%, #000 8%);
    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.28);
}

.btn-primary-soft {
    background-color: var(--color-accent-soft);
    color: var(--color-accent-strong);
    border-color: color-mix(in srgb, var(--color-accent) 40%, #000 6%);
    box-shadow: 0 10px 30px rgba(16, 185, 129, 0.15);
}

.btn-primary:hover {
    background-color: var(--color-accent-strong);
}
.btn-primary-soft:hover {
    background-color: color-mix(
        in srgb,
        var(--color-accent) 16%,
        var(--color-surface)
    );
}
.btn-primary:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 3px;
}
.btn-primary-soft:focus-visible {
    outline: 2px solid var(--color-accent);
    outline-offset: 3px;
}

.btn-ghost {
    background-color: var(--color-surface);
    color: var(--color-fg);
    border-color: var(--color-border);
}

.btn-ghost:hover {
    background-color: var(--color-surface-soft);
}
.btn-ghost:focus-visible {
    outline: 2px solid var(--color-border-strong);
    outline-offset: 3px;
}

.chip {
    align-items: center;
    font-weight: 600;
    font-size: 0.9rem;
    color: var(--color-accent);
    /* background-color: var(--color-accent-soft); */
    /* border: 1px solid color-mix(in srgb, var(--color-accent) 35%, #000 5%); */
    /* border-radius: 9999px; */
}
